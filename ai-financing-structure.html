<!DOCTYPE html>
<html lang="en">

<head>

    <script class="injected-ffc2e83d85">
        (function () {
            'use strict'; function q(b) { var c = 0; return function () { return c < b.length ? { done: !1, value: b[c++] } : { done: !0 } } } function t(b) { var c = typeof Symbol != "undefined" && Symbol.iterator && b[Symbol.iterator]; if (c) return c.call(b); if (typeof b.length == "number") return { next: q(b) }; throw Error(String(b) + " is not an iterable or ArrayLike"); } var u = typeof Object.defineProperties == "function" ? Object.defineProperty : function (b, c, g) { if (b == Array.prototype || b == Object.prototype) return b; b[c] = g.value; return b };
            function v(b) { b = ["object" == typeof globalThis && globalThis, b, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global]; for (var c = 0; c < b.length; ++c) { var g = b[c]; if (g && g.Math == Math) return g } throw Error("Cannot find global object"); } var w = v(this); function x(b, c) { if (c) a: { var g = w; b = b.split("."); for (var h = 0; h < b.length - 1; h++) { var l = b[h]; if (!(l in g)) break a; g = g[l] } b = b[b.length - 1]; h = g[b]; c = c(h); c != h && c != null && u(g, b, { configurable: !0, writable: !0, value: c }) } }
            function y() { this.j = !1; this.g = null; this.u = void 0; this.h = 1; this.v = this.l = 0; this.i = null } function z(b) { if (b.j) throw new TypeError("Generator is already running"); b.j = !0 } y.prototype.o = function (b) { this.u = b }; function A(b, c) { b.i = { I: c, J: !0 }; b.h = b.l || b.v } y.prototype.return = function (b) { this.i = { return: b }; this.h = this.v }; function B(b) { this.g = new y; this.h = b } function E(b, c) { z(b.g); var g = b.g.g; if (g) return F(b, "return" in g ? g["return"] : function (h) { return { value: h, done: !0 } }, c, b.g.return); b.g.return(c); return G(b) }
            function F(b, c, g, h) { try { var l = c.call(b.g.g, g); if (!(l instanceof Object)) throw new TypeError("Iterator result " + l + " is not an object"); if (!l.done) return b.g.j = !1, l; var m = l.value } catch (f) { return b.g.g = null, A(b.g, f), G(b) } b.g.g = null; h.call(b.g, m); return G(b) } function G(b) { for (; b.g.h;)try { var c = b.h(b.g); if (c) return b.g.j = !1, { value: c.value, done: !1 } } catch (g) { b.g.u = void 0, A(b.g, g) } b.g.j = !1; if (b.g.i) { c = b.g.i; b.g.i = null; if (c.J) throw c.I; return { value: c.return, done: !0 } } return { value: void 0, done: !0 } }
            function H(b) { this.next = function (c) { z(b.g); b.g.g ? c = F(b, b.g.g.next, c, b.g.o) : (b.g.o(c), c = G(b)); return c }; this.throw = function (c) { z(b.g); b.g.g ? c = F(b, b.g.g["throw"], c, b.g.o) : (A(b.g, c), c = G(b)); return c }; this.return = function (c) { return E(b, c) }; this[Symbol.iterator] = function () { return this } } function I(b) { function c(h) { return b.next(h) } function g(h) { return b.throw(h) } return new Promise(function (h, l) { function m(f) { f.done ? h(f.value) : Promise.resolve(f.value).then(c, g).then(m, l) } m(b.next()) }) }
            x("Symbol", function (b) { function c(m) { if (this instanceof c) throw new TypeError("Symbol is not a constructor"); return new g(h + (m || "") + "_" + l++, m) } function g(m, f) { this.g = m; u(this, "description", { configurable: !0, writable: !0, value: f }) } if (b) return b; g.prototype.toString = function () { return this.g }; var h = "jscomp_symbol_" + (Math.random() * 1E9 >>> 0) + "_", l = 0; return c });
            x("Symbol.iterator", function (b) { if (b) return b; b = Symbol("Symbol.iterator"); u(Array.prototype, b, { configurable: !0, writable: !0, value: function () { return J(q(this)) } }); return b }); function J(b) { b = { next: b }; b[Symbol.iterator] = function () { return this }; return b }
            x("Promise", function (b) {
                function c(f) { this.h = 0; this.i = void 0; this.g = []; this.u = !1; var a = this.j(); try { f(a.resolve, a.reject) } catch (d) { a.reject(d) } } function g() { this.g = null } function h(f) { return f instanceof c ? f : new c(function (a) { a(f) }) } if (b) return b; g.prototype.h = function (f) { if (this.g == null) { this.g = []; var a = this; this.i(function () { a.l() }) } this.g.push(f) }; var l = w.setTimeout; g.prototype.i = function (f) { l(f, 0) }; g.prototype.l = function () {
                    for (; this.g && this.g.length;) {
                        var f = this.g; this.g = []; for (var a = 0; a < f.length; ++a) {
                            var d =
                                f[a]; f[a] = null; try { d() } catch (e) { this.j(e) }
                        }
                    } this.g = null
                }; g.prototype.j = function (f) { this.i(function () { throw f; }) }; c.prototype.j = function () { function f(e) { return function (k) { d || (d = !0, e.call(a, k)) } } var a = this, d = !1; return { resolve: f(this.D), reject: f(this.l) } }; c.prototype.D = function (f) { if (f === this) this.l(new TypeError("A Promise cannot resolve to itself")); else if (f instanceof c) this.G(f); else { a: switch (typeof f) { case "object": var a = f != null; break a; case "function": a = !0; break a; default: a = !1 }a ? this.C(f) : this.o(f) } };
                c.prototype.C = function (f) { var a = void 0; try { a = f.then } catch (d) { this.l(d); return } typeof a == "function" ? this.H(a, f) : this.o(f) }; c.prototype.l = function (f) { this.v(2, f) }; c.prototype.o = function (f) { this.v(1, f) }; c.prototype.v = function (f, a) { if (this.h != 0) throw Error("Cannot settle(" + f + ", " + a + "): Promise already settled in state" + this.h); this.h = f; this.i = a; this.h === 2 && this.F(); this.K() }; c.prototype.F = function () { var f = this; l(function () { if (f.B()) { var a = w.console; typeof a !== "undefined" && a.error(f.i) } }, 1) }; c.prototype.B =
                    function () { if (this.u) return !1; var f = w.CustomEvent, a = w.Event, d = w.dispatchEvent; if (typeof d === "undefined") return !0; typeof f === "function" ? f = new f("unhandledrejection", { cancelable: !0 }) : typeof a === "function" ? f = new a("unhandledrejection", { cancelable: !0 }) : (f = w.document.createEvent("CustomEvent"), f.initCustomEvent("unhandledrejection", !1, !0, f)); f.promise = this; f.reason = this.i; return d(f) }; c.prototype.K = function () { if (this.g != null) { for (var f = 0; f < this.g.length; ++f)m.h(this.g[f]); this.g = null } }; var m = new g; c.prototype.G =
                        function (f) { var a = this.j(); f.A(a.resolve, a.reject) }; c.prototype.H = function (f, a) { var d = this.j(); try { f.call(a, d.resolve, d.reject) } catch (e) { d.reject(e) } }; c.prototype.then = function (f, a) { function d(n, r) { return typeof n == "function" ? function (C) { try { e(n(C)) } catch (D) { k(D) } } : r } var e, k, p = new c(function (n, r) { e = n; k = r }); this.A(d(f, e), d(a, k)); return p }; c.prototype.catch = function (f) { return this.then(void 0, f) }; c.prototype.A = function (f, a) {
                            function d() {
                                switch (e.h) {
                                    case 1: f(e.i); break; case 2: a(e.i); break; default: throw Error("Unexpected state: " +
                                        e.h);
                                }
                            } var e = this; this.g == null ? m.h(d) : this.g.push(d); this.u = !0
                        }; c.resolve = h; c.reject = function (f) { return new c(function (a, d) { d(f) }) }; c.race = function (f) { return new c(function (a, d) { for (var e = t(f), k = e.next(); !k.done; k = e.next())h(k.value).A(a, d) }) }; c.all = function (f) { var a = t(f), d = a.next(); return d.done ? h([]) : new c(function (e, k) { function p(C) { return function (D) { n[C] = D; r--; r == 0 && e(n) } } var n = [], r = 0; do n.push(void 0), r++, h(d.value).A(p(n.length - 1), k), d = a.next(); while (!d.done) }) }; return c
            });
            function K(b, c) { return Object.prototype.hasOwnProperty.call(b, c) } x("Object.is", function (b) { return b ? b : function (c, g) { return c === g ? c !== 0 || 1 / c === 1 / g : c !== c && g !== g } }); x("Array.prototype.includes", function (b) { return b ? b : function (c, g) { var h = this; h instanceof String && (h = String(h)); var l = h.length; g = g || 0; for (g < 0 && (g = Math.max(g + l, 0)); g < l; g++) { var m = h[g]; if (m === c || Object.is(m, c)) return !0 } return !1 } });
            x("String.prototype.includes", function (b) { return b ? b : function (c, g) { if (this == null) throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined"); if (c instanceof RegExp) throw new TypeError("First argument to String.prototype.includes must not be a regular expression"); return this.indexOf(c, g || 0) !== -1 } });
            x("WeakMap", function (b) {
                function c(d) { this.g = (a += Math.random() + 1).toString(); if (d) { d = t(d); for (var e; !(e = d.next()).done;)e = e.value, this.set(e[0], e[1]) } } function g() { } function h(d) { var e = typeof d; return e === "object" && d !== null || e === "function" } function l(d) { if (!K(d, f)) { var e = new g; u(d, f, { value: e }) } } function m(d) { var e = Object[d]; e && (Object[d] = function (k) { if (k instanceof g) return k; Object.isExtensible(k) && l(k); return e(k) }) } if (function () {
                    if (!b || !Object.seal) return !1; try {
                        var d = Object.seal({}), e = Object.seal({}),
                            k = new b([[d, 2], [e, 3]]); if (k.get(d) != 2 || k.get(e) != 3) return !1; k.delete(d); k.set(e, 4); return !k.has(d) && k.get(e) == 4
                    } catch (p) { return !1 }
                }()) return b; var f = "$jscomp_hidden_" + Math.random(); m("freeze"); m("preventExtensions"); m("seal"); var a = 0; c.prototype.set = function (d, e) { if (!h(d)) throw Error("Invalid WeakMap key"); l(d); if (!K(d, f)) throw Error("WeakMap key fail: " + d); d[f][this.g] = e; return this }; c.prototype.get = function (d) { return h(d) && K(d, f) ? d[f][this.g] : void 0 }; c.prototype.has = function (d) {
                    return h(d) && K(d,
                        f) && K(d[f], this.g)
                }; c.prototype.delete = function (d) { return h(d) && K(d, f) && K(d[f], this.g) ? delete d[f][this.g] : !1 }; return c
            });
            x("Map", function (b) {
                function c() { var a = {}; return a.m = a.next = a.head = a } function g(a, d) { var e = a[1]; return J(function () { if (e) { for (; e.head != a[1];)e = e.m; for (; e.next != e.head;)return e = e.next, { done: !1, value: d(e) }; e = null } return { done: !0, value: void 0 } }) } function h(a, d) {
                    var e = d && typeof d; e == "object" || e == "function" ? m.has(d) ? e = m.get(d) : (e = "" + ++f, m.set(d, e)) : e = "p_" + d; var k = a[0][e]; if (k && K(a[0], e)) for (a = 0; a < k.length; a++) { var p = k[a]; if (d !== d && p.key !== p.key || d === p.key) return { id: e, list: k, index: a, entry: p } } return {
                        id: e,
                        list: k, index: -1, entry: void 0
                    }
                } function l(a) { this[0] = {}; this[1] = c(); this.size = 0; if (a) { a = t(a); for (var d; !(d = a.next()).done;)d = d.value, this.set(d[0], d[1]) } } if (function () {
                    if (!b || typeof b != "function" || !b.prototype.entries || typeof Object.seal != "function") return !1; try {
                        var a = Object.seal({ x: 4 }), d = new b(t([[a, "s"]])); if (d.get(a) != "s" || d.size != 1 || d.get({ x: 4 }) || d.set({ x: 4 }, "t") != d || d.size != 2) return !1; var e = d.entries(), k = e.next(); if (k.done || k.value[0] != a || k.value[1] != "s") return !1; k = e.next(); return k.done || k.value[0].x !=
                            4 || k.value[1] != "t" || !e.next().done ? !1 : !0
                    } catch (p) { return !1 }
                }()) return b; var m = new WeakMap; l.prototype.set = function (a, d) { a = a === 0 ? 0 : a; var e = h(this, a); e.list || (e.list = this[0][e.id] = []); e.entry ? e.entry.value = d : (e.entry = { next: this[1], m: this[1].m, head: this[1], key: a, value: d }, e.list.push(e.entry), this[1].m.next = e.entry, this[1].m = e.entry, this.size++); return this }; l.prototype.delete = function (a) {
                    a = h(this, a); return a.entry && a.list ? (a.list.splice(a.index, 1), a.list.length || delete this[0][a.id], a.entry.m.next = a.entry.next,
                        a.entry.next.m = a.entry.m, a.entry.head = null, this.size--, !0) : !1
                }; l.prototype.clear = function () { this[0] = {}; this[1] = this[1].m = c(); this.size = 0 }; l.prototype.has = function (a) { return !!h(this, a).entry }; l.prototype.get = function (a) { return (a = h(this, a).entry) && a.value }; l.prototype.entries = function () { return g(this, function (a) { return [a.key, a.value] }) }; l.prototype.keys = function () { return g(this, function (a) { return a.key }) }; l.prototype.values = function () { return g(this, function (a) { return a.value }) }; l.prototype.forEach =
                    function (a, d) { for (var e = this.entries(), k; !(k = e.next()).done;)k = k.value, a.call(d, k[1], k[0], this) }; l.prototype[Symbol.iterator] = l.prototype.entries; var f = 0; return l
            });
            x("Set", function (b) {
                function c(g) { this.g = new Map; if (g) { g = t(g); for (var h; !(h = g.next()).done;)this.add(h.value) } this.size = this.g.size } if (function () {
                    if (!b || typeof b != "function" || !b.prototype.entries || typeof Object.seal != "function") return !1; try {
                        var g = Object.seal({ x: 4 }), h = new b(t([g])); if (!h.has(g) || h.size != 1 || h.add(g) != h || h.size != 1 || h.add({ x: 4 }) != h || h.size != 2) return !1; var l = h.entries(), m = l.next(); if (m.done || m.value[0] != g || m.value[1] != g) return !1; m = l.next(); return m.done || m.value[0] == g || m.value[0].x != 4 ||
                            m.value[1] != m.value[0] ? !1 : l.next().done
                    } catch (f) { return !1 }
                }()) return b; c.prototype.add = function (g) { g = g === 0 ? 0 : g; this.g.set(g, g); this.size = this.g.size; return this }; c.prototype.delete = function (g) { g = this.g.delete(g); this.size = this.g.size; return g }; c.prototype.clear = function () { this.g.clear(); this.size = 0 }; c.prototype.has = function (g) { return this.g.has(g) }; c.prototype.entries = function () { return this.g.entries() }; c.prototype.values = function () { return this.g.values() }; c.prototype.keys = c.prototype.values; c.prototype[Symbol.iterator] =
                    c.prototype.values; c.prototype.forEach = function (g, h) { var l = this; this.g.forEach(function (m) { return g.call(h, m, m, l) }) }; return c
            }); (function () {
                function b() {
                    return m ? Promise.resolve(m) : f ? f : f = fetch("https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json").then(function (a) { if (!a.ok) throw Error("HTTP error! status: " + a.status + " fetching https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json"); return a.json() }).then(function (a) {
                        if (!Array.isArray(a)) throw new TypeError("Fetched icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json is not an array.");
                        return m = a
                    }).catch(function (a) { console.error("IconChecker: Failed to load valid icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json.", a); f = null; throw a; })
                } function c(a) {
                    var d, e, k, p; return I(new H(new B(function (n) {
                        switch (n.h) {
                            case 1: d = (a.textContent || "").trim(); if (!d || a.classList.contains("js-replaced-missing-icon") && d === "radio_button_unchecked") return n.return(); e = window.getComputedStyle(a); if (e.display === "none" || e.visibility === "hidden") return n.return();
                                n.l = 2; var r = b(); n.h = 4; return { value: r }; case 4: k = n.u; n.h = 3; n.l = 0; break; case 2: return n.l = 0, n.i = null, console.warn('IconChecker: Skipping check for icon "' + d + '" as valid names could not be loaded.'), n.return(); case 3: (p = k.includes(d)) ? a.classList.contains("js-replaced-missing-icon") && a.classList.remove("js-replaced-missing-icon") : d === "radio_button_unchecked" && a.classList.contains("js-replaced-missing-icon") || (a.textContent = "radio_button_unchecked", a.classList.add("js-replaced-missing-icon")), n.h = 0
                        }
                    })))
                }
                function g(a) { a = a === void 0 ? document.body : a; a.querySelectorAll(l).forEach(function (d) { c(d) }) } function h() {
                    b().catch(function () { }); document.fonts.ready.then(function () {
                        requestAnimationFrame(function () {
                            g(document.body); (new MutationObserver(function (a) {
                                var d = new Set; a = t(a); for (var e = a.next(); !e.done; e = a.next())if (e = e.value, e.type === "childList") e.addedNodes.forEach(function (p) { p.nodeType === Node.ELEMENT_NODE && (p.matches(l) && d.add(p), p.querySelectorAll(l).forEach(function (n) { d.add(n) })) }); else if (e.type ===
                                    "attributes" && e.attributeName === "class") { var k = e.target; e.target.nodeType === Node.ELEMENT_NODE && k.matches(l) && d.add(k) } else e.type === "characterData" && e.target.parentNode && (e = e.target.parentNode, e.nodeType === Node.ELEMENT_NODE && e.matches(l) && d.add(e)); d.size > 0 && setTimeout(function () { d.forEach(function (p) { c(p) }) }, 500)
                            })).observe(document.body, { childList: !0, subtree: !0, attributes: !0, attributeFilter: ["class"], characterData: !0 })
                        })
                    }).catch(function (a) {
                        console.error("IconChecker: Font loading error. Scanning icons anyway.",
                            a); requestAnimationFrame(function () { g(document.body) })
                    })
                } var l = ["material-icons", "material-symbols-outlined", "material-symbols-rounded", "material-symbols-sharp"].map(function (a) { return "." + a }).join(","), m = null, f = null; document.readyState === "loading" ? document.addEventListener("DOMContentLoaded", function () { h() }) : h()
            })();
        }).call(this);

    </script>

    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>AI Financing Structure Diagram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Node Styling */
        .node rect {
            cursor: pointer;
            shape-rendering: geometricPrecision;
            transition: opacity 0.2s ease;
        }

        .node text {
            pointer-events: none;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
            /* Stronger shadow for contrast */
            font-family: 'Inter', sans-serif;
        }

        /* Link Styling */
        .link {
            fill: none;
            stroke-opacity: 0.3;
            /* Slightly more transparent on dark */
            transition: stroke-opacity 0.2s ease, stroke 0.2s ease;
            cursor: pointer;
        }

        /* Interactive States */
        .dimmed {
            opacity: 0.1 !important;
            stroke-opacity: 0.02 !important;
        }

        .highlighted-link {
            stroke-opacity: 0.7 !important;
        }

        /* Custom Scrollbar for Dark Mode */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        /* Slate 900 */
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 3px;
        }

        /* Slate 700 */
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* Slate 600 */
    </style>
    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        /* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb
        }

        ::after,
        ::before {
            --tw-content: ''
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: baseline
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0;
            padding: 0
        }

        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        dialog {
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none
        }

        .pointer-events-none {
            pointer-events: none
        }

        .absolute {
            position: absolute
        }

        .relative {
            position: relative
        }

        .left-0 {
            left: 0px
        }

        .top-2 {
            top: 0.5rem
        }

        .z-10 {
            z-index: 10
        }

        .z-20 {
            z-index: 20
        }

        .m-2 {
            margin: 0.5rem
        }

        .mb-3 {
            margin-bottom: 0.75rem
        }

        .mt-10 {
            margin-top: 2.5rem
        }

        .mt-2 {
            margin-top: 0.5rem
        }

        .inline-block {
            display: inline-block
        }

        .flex {
            display: flex
        }

        .hidden {
            display: none
        }

        .h-full {
            height: 100%
        }

        .h-screen {
            height: 100vh
        }

        .w-1\/3 {
            width: 33.333333%
        }

        .w-full {
            width: 100%
        }

        .flex-1 {
            flex: 1 1 0%
        }

        .shrink-0 {
            flex-shrink: 0
        }

        .select-none {
            -webkit-user-select: none;
            user-select: none
        }

        .flex-col {
            flex-direction: column
        }

        .items-center {
            align-items: center
        }

        .justify-between {
            justify-content: space-between
        }

        .gap-2 {
            gap: 0.5rem
        }

        .gap-3 {
            gap: 0.75rem
        }

        .space-y-6> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1.5rem * var(--tw-space-y-reverse))
        }

        .overflow-hidden {
            overflow: hidden
        }

        .overflow-y-auto {
            overflow-y: auto
        }

        .rounded {
            border-radius: 0.25rem
        }

        .rounded-lg {
            border-radius: 0.5rem
        }

        .rounded-xl {
            border-radius: 0.75rem
        }

        .border {
            border-width: 1px
        }

        .border-b {
            border-bottom-width: 1px
        }

        .border-l {
            border-left-width: 1px
        }

        .border-slate-700 {
            --tw-border-opacity: 1;
            border-color: rgb(51 65 85 / var(--tw-border-opacity, 1))
        }

        .border-slate-800 {
            --tw-border-opacity: 1;
            border-color: rgb(30 41 59 / var(--tw-border-opacity, 1))
        }

        .bg-black {
            --tw-bg-opacity: 1;
            background-color: rgb(0 0 0 / var(--tw-bg-opacity, 1))
        }

        .bg-blue-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1))
        }

        .bg-slate-800 {
            --tw-bg-opacity: 1;
            background-color: rgb(30 41 59 / var(--tw-bg-opacity, 1))
        }

        .bg-slate-900 {
            --tw-bg-opacity: 1;
            background-color: rgb(15 23 42 / var(--tw-bg-opacity, 1))
        }

        .p-2 {
            padding: 0.5rem
        }

        .p-4 {
            padding: 1rem
        }

        .px-10 {
            padding-left: 2.5rem;
            padding-right: 2.5rem
        }

        .px-2 {
            padding-left: 0.5rem;
            padding-right: 0.5rem
        }

        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem
        }

        .px-6 {
            padding-left: 1.5rem;
            padding-right: 1.5rem
        }

        .py-1 {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem
        }

        .py-1\.5 {
            padding-top: 0.375rem;
            padding-bottom: 0.375rem
        }

        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem
        }

        .pl-2 {
            padding-left: 0.5rem
        }

        .pr-2 {
            padding-right: 0.5rem
        }

        .pt-10 {
            padding-top: 2.5rem
        }

        .text-left {
            text-align: left
        }

        .text-center {
            text-align: center
        }

        .text-right {
            text-align: right
        }

        .text-5xl {
            font-size: 3rem;
            line-height: 1
        }

        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem
        }

        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem
        }

        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem
        }

        .font-bold {
            font-weight: 700
        }

        .font-medium {
            font-weight: 500
        }

        .font-semibold {
            font-weight: 600
        }

        .uppercase {
            text-transform: uppercase
        }

        .tracking-tight {
            letter-spacing: -0.025em
        }

        .tracking-wide {
            letter-spacing: 0.025em
        }

        .tracking-wider {
            letter-spacing: 0.05em
        }

        .text-\[\#2196f3\] {
            --tw-text-opacity: 1;
            color: rgb(33 150 243 / var(--tw-text-opacity, 1))
        }

        .text-\[\#4caf50\] {
            --tw-text-opacity: 1;
            color: rgb(76 175 80 / var(--tw-text-opacity, 1))
        }

        .text-\[\#ff9800\] {
            --tw-text-opacity: 1;
            color: rgb(255 152 0 / var(--tw-text-opacity, 1))
        }

        .text-slate-200 {
            --tw-text-opacity: 1;
            color: rgb(226 232 240 / var(--tw-text-opacity, 1))
        }

        .text-slate-300 {
            --tw-text-opacity: 1;
            color: rgb(203 213 225 / var(--tw-text-opacity, 1))
        }

        .text-slate-400 {
            --tw-text-opacity: 1;
            color: rgb(148 163 184 / var(--tw-text-opacity, 1))
        }

        .text-slate-500 {
            --tw-text-opacity: 1;
            color: rgb(100 116 139 / var(--tw-text-opacity, 1))
        }

        .text-slate-600 {
            --tw-text-opacity: 1;
            color: rgb(71 85 105 / var(--tw-text-opacity, 1))
        }

        .text-slate-700 {
            --tw-text-opacity: 1;
            color: rgb(51 65 85 / var(--tw-text-opacity, 1))
        }

        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .shadow-\[0_0_15px_rgba\(0\2c 0\2c 0\2c 0\.3\)\] {
            --tw-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
            --tw-shadow-colored: 0 0 15px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-sm {
            --tw-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .transition-colors {
            transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .transition-transform {
            transition-property: transform;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .duration-300 {
            transition-duration: 300ms
        }

        .hover\:bg-blue-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(29 78 216 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-slate-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(51 65 85 / var(--tw-bg-opacity, 1))
        }

        @media (min-width: 768px) {
            .md\:m-4 {
                margin: 1rem
            }

            .md\:flex {
                display: flex
            }

            .md\:px-16 {
                padding-left: 4rem;
                padding-right: 4rem
            }
        }

        @media (min-width: 1024px) {
            .lg\:w-96 {
                width: 24rem
            }

            .lg\:flex-row {
                flex-direction: row
            }
        }
    </style>
</head>

<body class="bg-black text-slate-200 h-screen flex flex-col overflow-hidden">
    <!-- Header -->
    <header
        class="bg-slate-900 border-b border-slate-800 px-6 py-3 flex items-center justify-between shadow-sm z-10 shrink-0">
        <div>
            <h1 class="text-xl font-bold text-white tracking-tight">AI Financing Structure</h1>
            <p class="text-[10px] text-slate-400 opacity-60 leading-tight mt-0.5">Created by CK Cheruvettolil</p>
            <p class="text-xs text-slate-400">Global funding flows for AI capacity building</p>
        </div>
        <div class="hidden md:flex gap-3">

            <button
                class="flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm"
                onclick="downloadCode()">
                <span class="material-symbols-outlined text-lg">download</span> Download HTML
            </button>
        </div>
    </header>
    <!-- Main Content -->
    <main class="flex-1 flex flex-col overflow-hidden relative">

        <!-- Chart Area -->
        <div
            class="flex-1 relative bg-black m-2 md:m-4 rounded-xl shadow-sm border border-slate-800 flex flex-col overflow-hidden">
            <!-- Labels -->
            <div
                class="absolute top-2 left-0 w-full flex justify-between px-10 md:px-16 text-xs font-bold tracking-wider text-slate-500 select-none pointer-events-none z-10">
                <span class="text-[#4caf50] w-1/3 text-left pl-2">SOURCES OF FUNDS</span>
                <span class="text-[#ff9800] w-1/3 text-center">INSTRUMENTS</span>
                <span class="text-[#2196f3] w-1/3 text-right pr-2">RECIPIENTS</span>
            </div>
            <div class="w-full h-full p-2 pt-10" id="chart-container"><svg width="758" height="732">
                    <g transform="translate(10, 5)">
                        <rect x="293" y="310.1034482758623" width="152" height="392.8965517241377" rx="8"
                            fill="transparent" stroke="#FB8C00" stroke-width="1.5" stroke-dasharray="4,4"
                            style="opacity: 0.6;"></rect>
                        <g>
                            <path class="link" d="M141,55.828C220,55.828,220,55.828,299,55.828"
                                stroke-width="109.6551724137931" stroke="#2E7D32"></path>
                            <path class="link" d="M141,169.517C220,169.517,220,154.517,299,154.517"
                                stroke-width="87.72413793103448" stroke="#388E3C"></path>
                            <path class="link" d="M141,246.276C220,246.276,220,620.241,299,620.241"
                                stroke-width="65.79310344827586" stroke="#388E3C"></path>
                            <path class="link" d="M141,338.034C220,338.034,220,257.241,299,257.241"
                                stroke-width="87.72413793103448" stroke="#43A047"></path>
                            <path class="link" d="M141,414.793C220,414.793,220,349,299,349"
                                stroke-width="65.79310344827586" stroke="#43A047"></path>
                            <path class="link" d="M141,495.586C220,495.586,220,414.793,299,414.793"
                                stroke-width="65.79310344827586" stroke="#4CAF50"></path>
                            <path class="link" d="M141,561.379C220,561.379,220,495.586,299,495.586"
                                stroke-width="65.79310344827586" stroke="#4CAF50"></path>
                            <path class="link" d="M141,631.207C220,631.207,220,550.414,299,550.414"
                                stroke-width="43.86206896551724" stroke="#66BB6A"></path>
                            <path class="link" d="M141,675.069C220,675.069,220,675.069,299,675.069"
                                stroke-width="43.86206896551724" stroke="#66BB6A"></path>
                            <path class="link" d="M439,44.862C518,44.862,518,44.862,597,44.862"
                                stroke-width="87.72413793103448" stroke="#EF6C00"></path>
                            <path class="link" d="M439,143.552C518,143.552,518,158.552,597,158.552"
                                stroke-width="109.6551724137931" stroke="#EF6C00"></path>
                            <path class="link" d="M439,235.31C518,235.31,518,235.31,597,235.31"
                                stroke-width="43.86206896551724" stroke="#F57C00"></path>
                            <path class="link" d="M439,279.172C518,279.172,518,294.172,597,294.172"
                                stroke-width="43.86206896551724" stroke="#F57C00"></path>
                            <path class="link" d="M439,349C518,349,518,349,597,349" stroke-width="65.79310344827586"
                                stroke="#FB8C00"></path>
                            <path class="link" d="M439,414.793C518,414.793,518,429.793,597,429.793"
                                stroke-width="65.79310344827586" stroke="#FB8C00"></path>
                            <path class="link" d="M439,495.586C518,495.586,518,495.586,597,495.586"
                                stroke-width="65.79310344827586" stroke="#FFA726"></path>
                            <path class="link" d="M439,550.414C518,550.414,518,631.207,597,631.207"
                                stroke-width="43.86206896551724" stroke="#FFA726"></path>
                            <path class="link" d="M439,620.241C518,620.241,518,561.379,597,561.379"
                                stroke-width="65.79310344827586" stroke="#FFB74D"></path>
                            <path class="link" d="M439,675.069C518,675.069,518,675.069,597,675.069"
                                stroke-width="43.86206896551724" stroke="#FFB74D"></path>
                        </g>
                        <g>
                            <g class="node">
                                <rect x="1" y="1" height="109.6551724137931" width="140" rx="6" fill="#2E7D32"
                                    stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="71"
                                    y="55.82758620689655" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="71" dy="-0.20000000000000007em">Institutional / Private</tspan>
                                    <tspan x="71" dy="0.9em">Investors</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="1" y="125.6551724137931" height="153.5172413793104" width="140" rx="6"
                                    fill="#388E3C" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="71"
                                    y="202.41379310344828" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="71" dy="0.35em">Corporate</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="1" y="294.1724137931035" height="153.51724137931046" width="140" rx="6"
                                    fill="#43A047" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="71"
                                    y="370.9310344827587" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="71" dy="-0.20000000000000007em">Multilateral</tspan>
                                    <tspan x="71" dy="0.9em">Development Banks</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="1" y="462.68965517241395" height="131.58620689655163" width="140" rx="6"
                                    fill="#4CAF50" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="71"
                                    y="528.4827586206898" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="71" dy="-0.20000000000000007em">Development</tspan>
                                    <tspan x="71" dy="0.9em">Agencies</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="1" y="609.2758620689656" height="87.72413793103453" width="140" rx="6"
                                    fill="#66BB6A" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="71"
                                    y="653.1379310344828" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="71" dy="0.35em">Philanthropies</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="299" y="1.00000000000019" height="197.3793103448276" width="140" rx="6"
                                    fill="#EF6C00" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="369"
                                    y="99.68965517241399" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="369" dy="-0.20000000000000007em">Private Capital</tspan>
                                    <tspan x="369" dy="0.9em">Markets</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="299" y="213.3793103448278" height="87.72413793103453" width="140" rx="6"
                                    fill="#F57C00" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="369"
                                    y="257.24137931034505" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="369" dy="0.35em">Loans</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="299" y="316.1034482758623" height="131.58620689655174" width="140" rx="6"
                                    fill="#FB8C00" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="369"
                                    y="381.8965517241382" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="369" dy="-0.20000000000000007em">Concessional</tspan>
                                    <tspan x="369" dy="0.9em">Financing (Loans)</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="299" y="462.68965517241406" height="109.65517241379291" width="140" rx="6"
                                    fill="#FFA726" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="369"
                                    y="517.5172413793105" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="369" dy="0.35em">Grants</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="299" y="587.344827586207" height="109.65517241379303" width="140" rx="6"
                                    fill="#FFB74D" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="369"
                                    y="642.1724137931035" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="369" dy="0.35em">In-Kind Contributions</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="597" y="1" height="87.72413793103448" width="140" rx="6" fill="#01579B"
                                    stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="667"
                                    y="44.86206896551724" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="667" dy="0.35em">Tier 4: AI Developers</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="597" y="103.72413793103448" height="153.5172413793103" width="140" rx="6"
                                    fill="#0277BD" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="667"
                                    y="180.48275862068962" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="667" dy="0.35em">Tier 3: AI Enabled</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="597" y="272.24137931034477" height="109.65517241379314" width="140" rx="6"
                                    fill="#0288D1" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="667"
                                    y="327.06896551724134" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="667" dy="0.35em">Tier 2: AI Ready</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="597" y="396.8965517241379" height="197.37931034482767" width="140" rx="6"
                                    fill="#039BE5" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="667"
                                    y="495.58620689655174" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="667" dy="-0.20000000000000007em">Tier 1: AI</tspan>
                                    <tspan x="667" dy="0.9em">Experimenters</tspan>
                                </text>
                            </g>
                            <g class="node">
                                <rect x="597" y="609.2758620689656" height="87.72413793103442" width="140" rx="6"
                                    fill="#29B6F6" stroke="#000000" stroke-width="2"
                                    style="filter: drop-shadow(rgba(0, 0, 0, 0.5) 0px 2px 3px);"></rect><text x="667"
                                    y="653.1379310344828" text-anchor="middle" dominant-baseline="middle"
                                    style="fill: white; font-size: 12px; font-weight: 600;">
                                    <tspan x="667" dy="0.35em">Tier 0: AI Nascent</tspan>
                                </text>
                            </g>
                        </g>
                    </g>
                </svg></div>
        </div>

    </main>
    <script>
        // --- Data Definitions ---

        const nodesData = [
            // --- Sources (Column 0) ---
            { name: "Institutional / Private Investors", type: "source", col: 0, order: 0, color: "#2E7D32" },
            { name: "Corporate", type: "source", col: 0, order: 1, color: "#388E3C" },
            { name: "Multilateral Development Banks", type: "source", col: 0, order: 2, color: "#43A047" },
            { name: "Development Agencies", type: "source", col: 0, order: 3, color: "#4CAF50" },
            { name: "Philanthropies", type: "source", col: 0, order: 4, color: "#66BB6A" },

            // --- Instruments (Column 1) ---
            { name: "Private Capital Markets", type: "instrument", col: 1, order: 0, color: "#EF6C00" },
            { name: "Loans", type: "instrument", col: 1, order: 1, color: "#F57C00" },
            // Pooled Group
            { name: "Concessional Financing (Loans)", type: "instrument", col: 1, order: 2, color: "#FB8C00", isPooled: true },
            { name: "Grants", type: "instrument", col: 1, order: 3, color: "#FFA726", isPooled: true },
            { name: "In-Kind Contributions", type: "instrument", col: 1, order: 4, color: "#FFB74D", isPooled: true },

            // --- Recipients (Column 2) ---
            { name: "Tier 4: AI Developers", type: "recipient", col: 2, order: 0, color: "#01579B" },
            { name: "Tier 3: AI Enabled", type: "recipient", col: 2, order: 1, color: "#0277BD" },
            { name: "Tier 2: AI Ready", type: "recipient", col: 2, order: 2, color: "#0288D1" },
            { name: "Tier 1: AI Experimenters", type: "recipient", col: 2, order: 3, color: "#039BE5" },
            { name: "Tier 0: AI Nascent", type: "recipient", col: 2, order: 4, color: "#29B6F6" }
        ];

        // Node Indices Map
        const N = {
            InstPriv: 0, Corp: 1, MDB: 2, DevAgency: 3, Phil: 4,
            PrivCap: 5, Loans: 6, Concessional: 7, Grants: 8, InKind: 9,
            Tier4: 10, Tier3: 11, Tier2: 12, Tier1: 13, Tier0: 14
        };

        // --- Links Definition ---
        const linksData = [
            // Source -> Instrument
            { source: N.InstPriv, target: N.PrivCap, value: 25 },
            { source: N.Corp, target: N.PrivCap, value: 20 },
            { source: N.Corp, target: N.InKind, value: 15 },
            { source: N.MDB, target: N.Loans, value: 20 },
            { source: N.MDB, target: N.Concessional, value: 15 },
            { source: N.DevAgency, target: N.Concessional, value: 15 },
            { source: N.DevAgency, target: N.Grants, value: 15 },
            { source: N.Phil, target: N.Grants, value: 10 },
            { source: N.Phil, target: N.InKind, value: 10 },

            // Instrument -> Recipient
            { source: N.PrivCap, target: N.Tier4, value: 20 },
            { source: N.PrivCap, target: N.Tier3, value: 25 },
            { source: N.Loans, target: N.Tier3, value: 10 },
            { source: N.Loans, target: N.Tier2, value: 10 },
            { source: N.Concessional, target: N.Tier2, value: 15 },
            { source: N.Concessional, target: N.Tier1, value: 15 },
            { source: N.Grants, target: N.Tier1, value: 15 },
            { source: N.Grants, target: N.Tier0, value: 10 },
            { source: N.InKind, target: N.Tier1, value: 15 },
            { source: N.InKind, target: N.Tier0, value: 10 }
        ];

        // Detailed Content Text
        const nodeDetails = {
            "Tier 4: AI Developers": {
                desc: "Capacity to train large foundation models, contributing to the frontier of AI research.",
                funding: "Countries will collaborate with their peers and countries in other tiers to continue capacity building."
            },
            "Tier 3: AI Enabled": {
                desc: "Countries with an established digital economy, and compute capacity to create mid-level models.",
                funding: "Likely to be met largely by development bank or private sector financing."
            },
            "Tier 2: AI Ready": {
                desc: "Countries with a National AI strategy, and a medium digital economy/levels of compute.",
                funding: "Provided by development banks (who secure a return on investment) and blended finance."
            },
            "Tier 1: AI Experimenters": {
                desc: "Countries with a National AI strategy, a minimum viable compute capacity.",
                funding: "Aid and philanthropic capital are important, alongside some development bank funding and in-kind contributions."
            },
            "Tier 0: AI Nascent": {
                desc: "LDCs with limited digital infrastructure.",
                funding: "Philanthropic capital, ODA and in-kind funding are critical. Initiatives are unlikely to generate financial returns."
            }
        };

        // --- D3 Setup ---
        let svg, sankey;
        let width, height;

        // REDUCED Top margin to pull diagram up
        // INCREASED Bottom margin to ensure strokes don't clip
        const margin = { top: 5, right: 10, bottom: 20, left: 10 };

        function initChart() {
            const container = document.getElementById('chart-container');
            if (!container) return;

            container.innerHTML = '';
            const rect = container.getBoundingClientRect();

            // Calculate drawing dimensions
            width = rect.width - margin.left - margin.right;
            height = rect.height - margin.top - margin.bottom;

            // Ensure we have positive dimensions
            if (width <= 0 || height <= 0) return;

            svg = d3.select("#chart-container").append("svg")
                .attr("width", rect.width)
                .attr("height", rect.height)
                .append("g")
                .attr("transform", `translate(${margin.left}, ${margin.top})`);

            const nodeWidth = 140;

            // Sligthly reduce the bottom extent to pull the lowest node up a bit from the very edge
            sankey = d3.sankey()
                .nodeId(d => d.index)
                .nodeWidth(nodeWidth)
                .nodePadding(15) // Slightly tighter padding to fit better vertically
                .extent([[1, 1], [width - 1, height - 10]]) // Ensure extent leaves a small buffer at bottom inside the margins
                .nodeSort((a, b) => a.order - b.order)
                .linkSort((a, b) => (a.source.order - b.source.order) || (a.target.order - b.target.order));

            const graph = sankey({
                nodes: nodesData.map(d => ({ ...d })),
                links: linksData.map(d => ({ ...d }))
            });

            // --- Draw Pooled Box (Background) ---
            const pooledNodes = graph.nodes.filter(n => n.isPooled);
            if (pooledNodes.length > 0) {
                const minX = d3.min(pooledNodes, d => d.x0);
                const maxX = d3.max(pooledNodes, d => d.x1);
                const minY = d3.min(pooledNodes, d => d.y0);
                const maxY = d3.max(pooledNodes, d => d.y1);

                svg.append("rect")
                    .attr("x", minX - 6)
                    .attr("y", minY - 6)
                    .attr("width", (maxX - minX) + 12)
                    .attr("height", (maxY - minY) + 12)
                    .attr("rx", 8)
                    .attr("fill", "transparent")
                    .attr("stroke", "#FB8C00")
                    .attr("stroke-width", 1.5)
                    .attr("stroke-dasharray", "4,4")
                    .style("opacity", 0.6); // Slightly more visible in dark mode
            }

            // --- Draw Links ---
            const links = svg.append("g")
                .selectAll("path")
                .data(graph.links)
                .enter().append("path")
                .attr("class", "link")
                .attr("d", d3.sankeyLinkHorizontal())
                .attr("stroke-width", d => Math.max(1, d.width))
                .attr("stroke", d => d.source.color)

                .on("mouseenter", function (e, d) {
                    // Dim all nodes and links
                    d3.selectAll(".node").classed("dimmed", true);
                    d3.selectAll(".link").classed("dimmed", true);

                    // Highlight ONLY this link
                    d3.select(this)
                        .classed("dimmed", false)
                        .classed("highlighted-link", true);

                    // Highlight Source and Target Node (but NOT other links connected to them)
                    d3.selectAll(".node").filter(n => n === d.source || n === d.target)
                        .classed("dimmed", false);
                })
                .on("mouseleave", resetDim);

            // --- Draw Nodes ---
            const nodes = svg.append("g")
                .selectAll("g")
                .data(graph.nodes)
                .enter().append("g")
                .attr("class", "node")

                .on("mouseenter", function (e, d) {
                    // Dim everything
                    d3.selectAll(".node").classed("dimmed", true);
                    d3.selectAll(".link").classed("dimmed", true);

                    // Highlight THIS node
                    d3.select(this).classed("dimmed", false);

                    // Highlight connected links
                    d3.selectAll(".link")
                        .filter(l => l.source === d || l.target === d)
                        .classed("dimmed", false)
                        .classed("highlighted-link", true);

                    // Highlight connected neighbor nodes
                    d3.selectAll(".link")
                        .filter(l => l.source === d || l.target === d)
                        .each(function (l) {
                            d3.selectAll(".node").filter(n => n === l.source || n === l.target)
                                .classed("dimmed", false);
                        });
                })
                .on("mouseleave", resetDim);

            // Node Rects
            nodes.append("rect")
                .attr("x", d => d.x0)
                .attr("y", d => d.y0)
                .attr("height", d => Math.max(d.y1 - d.y0, 1)) // Ensure min height
                .attr("width", d => d.x1 - d.x0)
                .attr("rx", 6)
                .attr("fill", d => d.color)
                .attr("stroke", "#000000") // Black stroke to match background for "cutout" look
                .attr("stroke-width", 2)
                .style("filter", "drop-shadow(0px 2px 3px rgba(0,0,0,0.5))");

            // Node Text (Inside, Centered, Wrapped)
            nodes.append("text")
                .attr("x", d => (d.x0 + d.x1) / 2)
                .attr("y", d => (d.y0 + d.y1) / 2)
                .attr("text-anchor", "middle")
                .attr("dominant-baseline", "middle")
                .style("fill", "white")
                .style("font-size", "12px")
                .style("font-weight", "600")
                .each(function (d) {
                    const el = d3.select(this);
                    const words = d.name.split(/\s+/).reverse();
                    const width = nodeWidth - 10; // Padding inside rect
                    const lineHeight = 1.1; // ems

                    let line = [];
                    let lineNumber = 0;
                    let tspan = el.text(null).append("tspan").attr("x", (d.x0 + d.x1) / 2).attr("dy", 0);

                    let word;
                    while (word = words.pop()) {
                        line.push(word);
                        tspan.text(line.join(" "));
                        if (tspan.node().getComputedTextLength() > width && line.length > 1) {
                            line.pop();
                            tspan.text(line.join(" "));
                            line = [word];
                            tspan = el.append("tspan")
                                .attr("x", (d.x0 + d.x1) / 2)
                                .attr("dy", lineHeight + "em")
                                .text(word);
                            lineNumber++;
                        }
                    }

                    // Vertical centering adjustment based on number of lines
                    const totalHeight = lineNumber * lineHeight;
                    el.selectAll("tspan").attr("dy", function (d, i) {
                        return (i * lineHeight - totalHeight / 2) + 0.35 + "em";
                    });
                });
        }

        function resetDim() {
            d3.selectAll(".link")
                .classed("dimmed", false)
                .classed("highlighted-link", false);
            d3.selectAll(".node")
                .classed("dimmed", false);
        }



        // Function to download the current HTML content
        function downloadCode() {
            const htmlContent = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ai-financing-structure.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        window.addEventListener('resize', initChart);
        setTimeout(initChart, 50);

    </script>


</body>

</html>